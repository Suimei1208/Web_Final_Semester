<div class="update">
    <?php
        $count = 0;
        foreach($flims as $p){
            $count++;
            if($count===5) break;
            if($p['poster_small'] == null) $p['poster_small'] = 'fake.png';
            if($p['name_flim'] == null) $p['name_flim'] = 'Updating...';
    ?>     
            <div class="cell">
                <img src="./assets/img/<?=$p['poster_small']?>"/>
                <div class="user-info">
                    <span class="title"><?=$p['name_flim']?></p>
                    <span class="position">View: <?=number_format($p['view'])?></p>
                </div>
            </div>
        
        <?php             
        }
        ?>
    </div>
    
    <div class="update">
    <?php
        $count = 0;
        foreach($flims as $p){
            $count++;
            if($count <5) continue;
            if($count===9) break;
            if($p['poster_small'] == null) $p['poster_small'] = 'fake.png';
            if($p['name_flim'] == null) $p['name_flim'] = 'Updating...';
    ?>     
            <div class="cell">
                <img src="./assets/img/<?=$p['poster_small']?>"/>
                <div class="user-info">
                    <span class="title"><?=$p['name_flim']?></p>
                    <span class="position">View: <?=number_format($p['view'])?></p>
                </div>
            </div>
        
        <?php             
        }
        ?>
    </div>

    <div class="update">
    <?php
        $count = 0;
        foreach($flims as $p){
            $count++;
            if($count <9) continue;
            if($count===13) break;
            if($p['poster_small'] == null) $p['poster_small'] = 'fake.png';
            if($p['name_flim'] == null) $p['name_flim'] = 'Updating...';
    ?>     
            <div class="cell">
                <img src="./assets/img/<?=$p['poster_small']?>"/>
                <div class="user-info">
                    <span class="title"><?=$p['name_flim']?></p>
                    <span class="position">View: <?=number_format($p['view'])?></p>
                </div>
            </div>
        
        <?php             
        }
        ?>
    </div>

    <div class="update">
    <?php
        $count = 0;
        foreach($flims as $p){
            $count++;
            if($count <13) continue;
            if($count===17) break;
            if($p['poster_small'] == null) $p['poster_small'] = 'fake.png';
            if($p['name_flim'] == null) $p['name_flim'] = 'Updating...';
    ?>     
            <div class="cell">
                <img src="./assets/img/<?=$p['poster_small']?>"/>
                <div class="user-info">
                    <span class="title"><?=$p['name_flim']?></p>
                    <span class="position">View: <?=number_format($p['view'])?></p>
                </div>
            </div>
        
        <?php             
        }
        ?>
    </div>



<?php 
        $rows = 4;
        $cols = 4;
        $count = 0;
        foreach($flims as $p){
            if($p['poster_small'] == null) $p['poster_small'] = 'fake.png';
            if($p['name_flim'] == null) $p['name_flim'] = 'Updating...';
            if ($count % $cols == 0) {
            echo '<div class="update">';
            }
        ?>              
            <div class="cell">
                <img src="./assets/img/<?=$p['poster_small']?>"/>
                <div class="user-info">
                    <span class="title"><?=$p['name_flim']?></p>
                    <span class="position">View: <?=number_format($p['view'])?></p>
                </div>
            </div>
        <?php
            $count++;
            if ($count % $cols == 0) {
                echo "</div>";
            }
            if ($count == $rows * $cols) {
                break;
            }
        }?>
   


<div class="update">
        <div class="card-content" style="display: none;">
        <?php foreach($flims as $p){
                    if($p['poster_small'] == null) $p['poster_small'] = 'fake.png';
                    if($p['name_flim'] == null) $p['name_flim'] = 'Updating...';                
            ?>
                <div class="card">
                    <div class="card-image"><img src="assets/img/<?=$p['poster_small']?>" alt=""></div>
                    <div class="card-info">
                        <h3><?=$p['name_flim']?></h3>
                        <p>View: <?=number_format($p['view'])?></p>
                    </div>
                </div>
        <?php } ?>
    </div>



     <div id="tooltip">
                    <div class="item">
                        <div class="NameFilm"><?=$p['name_flim']?></div>
                        <?php
                            $words = str_word_count($p['content']);
                        if ($words > 50) {  
                            $shortText = implode(' ', array_slice(str_word_count($p['content'], 1), 0, 50)) . '...';
                            echo '<div class="Story">' . $shortText . '</div>';
                        } else { ?>
                        <div class="Story"><?=$p['content']?> </div> <?php } ?>
                        <div class="STD"><span style="color: #fffb00;"><i class="fa-solid fa-star"></i> <?=$p['rate']?>/5 </span><i class="fa-regular fa-clock" ></i> <?=$p['time']?> minutes <i class="fa-regular fa-calendar"></i> <?=$p['year']?></div>
                        <div class="AG">
                            <div class="AU"><span>Director:</span> <?=$p['director']?></div>
                            <div class="GE"><span>Genres:</span> <?=$p['genre']?></div>
                        </div>
                    </div>
                </div>